<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lean/setup</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="../css/agda.css" />
  <!-- Highlight.js for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://unpkg.com/highlightjs-lean@1.2.0/dist/lean.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', (event) => {
      // The lean.min.js automatically registers the 'lean' language with hljs

      // Fix Pandoc's class names for all code blocks
      // Pandoc with --no-highlight outputs: <pre class="LANGUAGE"><code>...</code></pre>
      // highlight.js expects: <pre><code class="language-LANGUAGE">...</code></pre>
      document.querySelectorAll('pre[class]').forEach((preBlock) => {
        const lang = preBlock.className;
        if (lang) {
          const codeBlock = preBlock.querySelector('code');
          if (codeBlock && !codeBlock.className) {
            codeBlock.classList.add('language-' + lang);
          }
        }
      });

      // Highlight all code blocks
      hljs.highlightAll();
    });
  </script>
</head>
<body>
<hr />
<p><a href="contents.html">Contents</a> <a href="Lean.intro.html">Previous</a> <a href="Lean.naming.html">Next</a></p>
<h1 id="lean-installation">Lean Installation</h1>
<p><a href="https://leanprover.github.io/">Lean</a> is a powerful theorem prover and programming language. This guide
provides various methods to install Lean on a system.</p>
<hr />
<ul>
<li><a href="#1-using-docker">1. Using Docker</a></li>
<li><a href="#2-using-elan-lean-version-manager">2. Using elan (Lean Version Manager)</a></li>
<li><a href="#3-via-package-managers">3. Via Package Managers</a>
<ul>
<li><a href="#homebrew-macos-and-linux">Homebrew (macOS and Linux)</a></li>
<li><a href="#yay-arch-manjaro">yay (Arch, Manjaro)</a></li>
<li><a href="#nix-nixos-and-other-systems">Nix (NixOS and other systems)</a></li>
</ul></li>
<li><a href="#4-building-from-source">4. Building from Source</a></li>
<li><a href="#development-environment">Development Environment</a>
<ul>
<li><a href="#vscode-integration">VSCode Integration</a></li>
<li><a href="#testing">Testing</a></li>
</ul></li>
<li><a href="#documentation">Documentation</a></li>
</ul>
<h2 id="using-docker">1. Using Docker</h2>
<p>Docker is the modern way to run applications in isolated environments. Using Docker for Lean ensures a consistent
setup across different systems without worrying about “it works on my machine” issues.</p>
<ol type="1">
<li><p>Install Docker:</p>
<ul>
<li><p>On Linux:</p>
<pre class="bash"><code>curl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; sh get-docker.sh</code></pre></li>
<li><p>On macOS and Windows: Download and install Docker Desktop from the <a
href="https://www.docker.com/products/docker-desktop">official Docker website</a></p></li>
</ul></li>
<li><p>Pull the latest Lean image:</p>
<pre class="bash"><code>docker pull leanprover/lean:latest</code></pre></li>
<li><p>Run the Docker container:</p>
<pre class="bash"><code>docker run -it -v /path/to/local/directory:/lean leanprover/lean:latest</code></pre></li>
<li><p>Inside the container, Lean can now be used:</p>
<pre class="bash"><code>lean --version</code></pre></li>
</ol>
<h2 id="using-elan-lean-version-manager">2. Using elan (Lean Version Manager)</h2>
<p>elan is the recommended tool for installing and managing Lean versions.</p>
<ol type="1">
<li><p>Install elan:</p>
<pre class="bash"><code>curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf | sh</code></pre></li>
<li><p>Install the latest stable version of Lean:</p>
<pre class="bash"><code>elan default stable</code></pre></li>
<li><p>Verify the installation:</p>
<pre class="bash"><code>lean --version</code></pre></li>
</ol>
<p>elan can also be used to manage multiple versions of Lean:</p>
<pre class="bash"><code>elan install &lt;version&gt;  # Install a specific version of Lean
elan default &lt;version&gt;  # Set the default version of Lean
elan list               # List installed Lean versions</code></pre>
<h2 id="via-package-managers">3. Via Package Managers</h2>
<h3 id="homebrew-macos-and-linux">Homebrew (macOS and Linux)</h3>
<pre class="bash"><code>brew install lean</code></pre>
<h3 id="yay-arch-manjaro">yay (Arch, Manjaro)</h3>
<pre class="bash"><code>yay -S lean4-bin</code></pre>
<h3 id="nix-nixos-and-other-systems">Nix (NixOS and other systems)</h3>
<pre class="bash"><code>nix-env -i lean</code></pre>
<h2 id="building-from-source">4. Building from Source</h2>
<p>For the latest development version or specific customizations:</p>
<ol type="1">
<li><p>Ensure CMake and GCC are installed.</p></li>
<li><p>Clone the Lean repository:</p>
<pre class="bash"><code>git clone https://github.com/leanprover/lean4.git
cd lean4</code></pre></li>
<li><p>Build and install:</p>
<pre class="bash"><code>mkdir build &amp;&amp; cd build
cmake ..
make</code></pre></li>
</ol>
<h2 id="development-environment">Development Environment</h2>
<h3 id="vscode-integration">VSCode Integration</h3>
<p>VSCode is the primary IDE for Lean development. The Lean extension provides a complete set of features required for
end to end development in Lean. Other editor integrations are available such as <code>lean-mode</code> for Emacs and
<code>lean.vim</code> for Vim. However, the VSCode extension is the most feature-rich and actively maintained.</p>
<h3 id="testing">Testing</h3>
<p>Lean supports unit testing through its <code>test</code> command:</p>
<pre class="lean"><code>def double (x : Nat) : Nat := x * 2

#test double 2 = 4        -- Basic test
#test double 0 = 0        -- Edge case</code></pre>
<p>Tests can be run using the <code>lean --test</code> command:</p>
<pre class="bash"><code>lean --test my_file.lean</code></pre>
<h2 id="documentation">Documentation</h2>
<p>Lean supports documentation strings using <code>/-! ... -/</code> for modules and <code>/-- ... -/</code> for
definitions:</p>
<pre class="lean"><code>/-!
# Basic Arithmetic Module
This module provides basic arithmetic operations.
-/

/--
`add` performs addition on natural numbers.
-/
#eval add 2 3  -- returns 5</code></pre>
<p>Lean also supports markdown-style comments for documentation:</p>
<pre class="lean"><code>/- Markdown-style comment
# Heading
This is a paragraph.
-/</code></pre>
<p>Documentation strings can be accessed using the <code>#print</code> command:</p>
<pre class="lean"><code>#print add</code></pre>
<p><a href="https://github.com/leanprover/doc-gen4"><code>doc-gen4</code></a> is a tool that generates documentation for
Lean projects and comes bundled with the Lean installation. Its setup includes creating a nested project for
documentation building inside the lake project.</p>
<ol type="1">
<li>Create a directory called <code>docbuild</code> inside the project.</li>
<li>Create a <code>lakefile.toml</code> file inside the <code>docbuild</code> directory:</li>
</ol>
<pre class="toml"><code>name = &quot;docbuild&quot;
reservoir = false
version = &quot;0.1.0&quot;
packagesDir = &quot;../.lake/packages&quot;

[[require]]
name = &quot;MyProject&quot;
path = &quot;../&quot;

[[require]]
scope = &quot;leanprover&quot;
name = &quot;doc-gen4&quot;
rev = &quot;main&quot;</code></pre>
<ol start="3" type="1">
<li>Run <code>lake update doc-gen4</code> within <code>docbuild</code> to pin <code>doc-gen4</code> and its dependencies
to the chosen versions.</li>
<li>If the parent project has dependencies, they can be updated for building the documentation by running
<code>lake update MyProject</code> in the <code>docbuild</code> directory.</li>
</ol>
<hr />
<p><a href="./Lean.projects.html">Projects &amp; Structure</a></p>
</body>
</html>
