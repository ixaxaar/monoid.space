/* 
 * Modern flat minimal design for monoid.space
 * Enhanced Lean syntax highlighting and mathematical content styling
 */

/* Import modern fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

/* Extend CSS variables for enhanced styling */
:root {
  /* Enhanced color palette */
  --lean-bg: #f8f9fa;
  --lean-border: #e9ecef;
  --lean-shadow: rgba(0, 0, 0, 0.08);
  
  /* Lean-specific syntax colors - carefully chosen for readability */
  --lean-keyword: #d73a49;        /* Keywords like 'def', 'theorem', 'by' */
  --lean-type: #005cc5;           /* Types like 'Nat', 'Prop' */
  --lean-string: #032f62;         /* String literals */
  --lean-comment: #6a737d;        /* Comments */
  --lean-number: #005cc5;         /* Numeric literals */
  --lean-function: #6f42c1;       /* Function names */
  --lean-variable: #24292e;       /* Variable names */
  --lean-operator: #d73a49;       /* Operators like '→', '∀', '∃' */
  --lean-tactic: #e36209;         /* Tactic names */
  --lean-proof: #28a745;          /* Proof terms */
  --lean-goal: #6c757d;           /* Goal states */
  
  /* Mathematical content colors */
  --math-bg: #f1f3f4;
  --math-border: #dadce0;
  
  /* Enhanced typography */
  --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-code: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', monospace;
  
  /* Animation and transitions */
  --transition-fast: 0.15s ease;
  --transition-normal: 0.25s ease;
}

/* Dark mode enhancements */
@media (prefers-color-scheme: dark) {
  :root {
    --lean-bg: #2d3748;
    --lean-border: #4a5568;
    --lean-shadow: rgba(0, 0, 0, 0.3);
    
    --lean-keyword: #ff7b72;
    --lean-type: #79c0ff;
    --lean-string: #a5d6ff;
    --lean-comment: #8b949e;
    --lean-number: #79c0ff;
    --lean-function: #d2a8ff;
    --lean-variable: #f0f6fc;
    --lean-operator: #ff7b72;
    --lean-tactic: #ffab70;
    --lean-proof: #7ee787;
    --lean-goal: #8b949e;
    
    --math-bg: #1c2128;
    --math-border: #30363d;
  }
}

/* Override body font for better readability */
body {
  font-family: var(--font-primary);
  font-feature-settings: "cv02", "cv03", "cv04", "cv11";
}

/* Enhanced Lean code blocks */
.lean, pre.lean {
  background: var(--lean-bg);
  border: 1px solid var(--lean-border);
  border-radius: var(--border-radius);
  font-family: var(--font-code);
  font-size: 0.9em;
  font-weight: 400;
  line-height: 1.6;
  margin: var(--space-lg) 0;
  padding: var(--space-xl);
  overflow-x: auto;
  box-shadow: var(--shadow-sm);
  position: relative;
  transition: all var(--transition-normal);
}

.lean:hover, pre.lean:hover {
  border-color: var(--accent-blue);
  box-shadow: var(--shadow-md);
}

/* Lean code block header */
.lean::before {
  content: "Lean";
  position: absolute;
  top: var(--space-sm);
  right: var(--space-md);
  font-size: 0.75rem;
  color: var(--text-muted);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* Enhanced Lean syntax highlighting */
.lean .sourceCode,
.sourceCode.lean {
  background: transparent;
  margin: 0;
  padding: 0;
  overflow: visible;
}

/* Lean keywords */
.lean .kw,
code span.kw,
.sourceCode .kw {
  color: var(--lean-keyword);
  font-weight: 600;
}

/* Lean data types */
.lean .dt,
code span.dt,
.sourceCode .dt {
  color: var(--lean-type);
  font-weight: 500;
}

/* Lean strings */
.lean .st,
code span.st,
.sourceCode .st {
  color: var(--lean-string);
}

/* Lean comments */
.lean .co,
code span.co,
.sourceCode .co {
  color: var(--lean-comment);
  font-style: italic;
}

/* Lean numbers */
.lean .dv, .lean .bn, .lean .fl,
code span.dv, code span.bn, code span.fl,
.sourceCode .dv, .sourceCode .bn, .sourceCode .fl {
  color: var(--lean-number);
  font-weight: 500;
}

/* Lean functions */
.lean .fu,
code span.fu,
.sourceCode .fu {
  color: var(--lean-function);
  font-weight: 500;
}

/* Lean variables */
.lean .va,
code span.va,
.sourceCode .va {
  color: var(--lean-variable);
}

/* Lean operators */
.lean .op,
code span.op,
.sourceCode .op {
  color: var(--lean-operator);
  font-weight: 500;
}

/* Lean built-ins */
.lean .bu,
code span.bu,
.sourceCode .bu {
  color: var(--lean-function);
  font-weight: 600;
}

/* Lean imports */
.lean .im,
code span.im,
.sourceCode .im {
  color: var(--lean-keyword);
  font-weight: 600;
}

/* Lean attributes */
.lean .at,
code span.at,
.sourceCode .at {
  color: var(--lean-tactic);
  font-weight: 500;
}

/* Lean errors */
.lean .er,
code span.er,
.sourceCode .er {
  color: #dc3545;
  background: rgba(220, 53, 69, 0.1);
  padding: 0 var(--space-xs);
  border-radius: var(--space-xs);
  font-weight: 600;
}

/* Special Lean syntax highlighting */
.lean .lean-tactic {
  color: var(--lean-tactic);
  font-weight: 600;
}

.lean .lean-proof-term {
  color: var(--lean-proof);
  font-weight: 500;
}

.lean .lean-goal {
  color: var(--lean-goal);
  background: rgba(108, 117, 125, 0.1);
  padding: 0 var(--space-xs);
  border-radius: var(--space-xs);
}

/* Mathematical content styling */
.math, .math.display {
  background: var(--math-bg);
  border: 1px solid var(--math-border);
  border-radius: var(--border-radius);
  margin: var(--space-lg) 0;
  padding: var(--space-xl);
  text-align: center;
  overflow-x: auto;
  box-shadow: var(--shadow-sm);
  position: relative;
}

.math::before {
  content: "Math";
  position: absolute;
  top: var(--space-sm);
  right: var(--space-md);
  font-size: 0.75rem;
  color: var(--text-muted);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* MathJax styling */
.MathJax_Display {
  margin: var(--space-lg) 0;
}

.mjx-chtml {
  background: var(--math-bg);
  border-radius: var(--border-radius);
  padding: var(--space-md);
  border: 1px solid var(--math-border);
  display: inline-block;
  transition: all var(--transition-normal);
}

.mjx-chtml:hover {
  box-shadow: var(--shadow-md);
}

/* Enhanced table styling for mathematical content */
table.lean-table {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  overflow: hidden;
}

table.lean-table th {
  background: var(--accent-blue);
  color: white;
  font-family: var(--font-primary);
  font-weight: 600;
  text-transform: none;
  letter-spacing: normal;
}

table.lean-table td {
  font-family: var(--font-code);
  font-size: 0.9em;
}

/* Enhanced image styling */
img {
  max-width: 100%;
  height: auto;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-normal);
}

img:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

/* Special elements for mathematical content */
.definition, .theorem, .lemma, .proof {
  background: var(--bg-secondary);
  border-left: 4px solid var(--accent-green);
  border-radius: 0 var(--border-radius) var(--border-radius) 0;
  margin: var(--space-lg) 0;
  padding: var(--space-lg);
  position: relative;
}

.theorem { border-left-color: var(--accent-purple); }
.lemma { border-left-color: var(--accent-orange); }
.proof { border-left-color: var(--accent-blue); }

.definition::before,
.theorem::before,
.lemma::before,
.proof::before {
  content: attr(data-type);
  position: absolute;
  top: var(--space-sm);
  right: var(--space-md);
  font-size: 0.75rem;
  color: var(--text-muted);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

/* Navigation improvements */
nav, .navigation {
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  padding: var(--space-md) var(--space-lg);
  margin: var(--space-lg) 0;
  box-shadow: var(--shadow-sm);
}

nav a, .navigation a {
  display: inline-block;
  margin: 0 var(--space-md) var(--space-sm) 0;
  padding: var(--space-sm) var(--space-md);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--space-sm);
  transition: all var(--transition-fast);
  text-decoration: none;
}

nav a:hover, .navigation a:hover {
  background: var(--accent-blue);
  color: white;
  border-color: var(--accent-blue);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* Code line numbering */
.sourceCode.numberSource {
  counter-reset: source-line;
}

.sourceCode.numberSource > span {
  position: relative;
  left: -4em;
  counter-increment: source-line;
}

.sourceCode.numberSource > span > a:first-child::before {
  content: counter(source-line);
  position: relative;
  left: -1em;
  text-align: right;
  vertical-align: baseline;
  border: none;
  display: inline-block;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  padding: 0 var(--space-sm);
  width: 4em;
  color: var(--text-muted);
  font-weight: normal;
  background: var(--bg-accent);
  border-right: 1px solid var(--border-color);
  margin-right: var(--space-md);
}

/* Print optimizations */
@media print {
  .lean, .math {
    break-inside: avoid;
    box-shadow: none;
    border: 1px solid #ccc;
  }
  
  .lean::before,
  .math::before,
  .definition::before,
  .theorem::before,
  .lemma::before,
  .proof::before {
    display: none;
  }
}

/* Animation for interactive elements */
@keyframes highlight {
  0% { background-color: var(--accent-blue); opacity: 0.3; }
  100% { background-color: transparent; opacity: 1; }
}

.highlight-animation {
  animation: highlight 0.6s ease-out;
}

/* Improved accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --lean-bg: #ffffff;
    --lean-border: #000000;
    --text-primary: #000000;
    --text-secondary: #333333;
    --accent-blue: #0000ee;
  }
}