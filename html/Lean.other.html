<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lean/other</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../css/agda.css" />
</head>
<body>
<hr />
<p><a href="contents.html">Contents</a> <a href="Lean.functions.html">Previous</a> <a
href="Lean.debugging.html">Next</a></p>
<h1 id="modules-and-projects">Modules and Projects</h1>
<hr />
<ul>
<li><a href="#modules-and-projects">Modules and Projects</a>
<ul>
<li><a href="#basics">Basics</a></li>
<li><a href="#projects">Projects</a>
<ul>
<li><a href="#file-structure">File Structure</a></li>
</ul></li>
<li><a href="#lake-package-manager">Lake Package Manager</a></li>
<li><a href="#vscode--vscodium-integration">vscode / vscodium Integration</a></li>
<li><a href="#elan">elan</a></li>
<li><a href="#doc-gen4">doc-gen4</a></li>
<li><a href="#testing">Testing</a></li>
</ul></li>
</ul>
<h2 id="basics">Basics</h2>
<p>Lean files typically end with a <code>.lean</code> extension, and each file represents a module. The name of the file
implicitly determines the name of the module, and this module can be imported by other modules.</p>
<ul>
<li>Each Lean file (.lean) defines a module, and the name of the file without the extension is the name of the module.
For example, a file named group_theory.lean will define a module called group_theory.</li>
<li>Files are organized into folders, and folder names are used as prefixes for module names. For instance, a file
located at src/algebra/group.lean would define a module named algebra.group.</li>
<li>Modules can also be explicitly defined using the <code>module</code> keyword. This is useful when you want to define
a module with a different name than the file name:</li>
</ul>
<pre class="lean"><code>-- In src/algebra/group.lean
module my_group

-- code here</code></pre>
<p>To quickly get started with Lean, you can create a simple <code>.lean</code> file and open it in vscode with the Lean
extension installed. You can then start writing Lean code and see the real-time type information and error messages.</p>
<pre class="lean"><code>def hello : String := &quot;Hello, Lean!&quot;
#check hello</code></pre>
<p>The lean extension has a sidebar that shows the structure of the file, and you can navigate to different sections of
the file by clicking on the items in the sidebar, called the “lean infoview”. The infoview also shows the type of the
current expression under the cursor and any errors in the file. The infoview can be toggled using the
<code>ctrl+shift+enter</code> shortcut.</p>
<p>The file can also be compiled using the Lean compiler, which will check the syntax and type correctness of the code.
The Lean compiler can be run from the command line using the <code>lean</code> command.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lean</span> my_file.lean</span></code></pre></div>
<p>This is great to start a new project or experiment with Lean code. However, for larger projects, it is recommended to
use a more structured approach with multiple files and modules, as we shall see below.</p>
<h2 id="projects">Projects</h2>
<p>In larger Lean projects, you will typically have multiple files organized into modules and directories. Lean projects
can be managed using the Lake package manager, which helps with building, testing, and managing dependencies.</p>
<p>The Lake package manager can be used to create a new Lean project with the <code>lake new</code> command:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lake</span> new my_project</span></code></pre></div>
<p>This creates a new directory called <code>my_project</code> that contains the following files:</p>
<ul>
<li><code>lakefile.toml</code>: The configuration file for the project.</li>
<li><code>lean-toolchain</code>: Specifies the Lean version.</li>
<li><code>Main.lean</code>: The main entry point for the project.</li>
<li><code>MyProject.lean</code> and <code>MyProject/Basic.lean</code>: scaffolding of a support library for the
project.</li>
</ul>
<p>In addition to this, it also creates a git repo for the project and a <code>.gitingore</code> file.</p>
<h3 id="file-structure">File Structure</h3>
<p>In Lean, projects typically follow a standard directory structure:</p>
<pre><code>my_project/
├── lakefile.toml    # Project configuration file
├── lean-toolchain  # Specifies Lean version
├── Main.lean       # Main entry point
└── src/            # Source files
    ├── Basic/      # Basic definitions
    ├── Logic/      # Logic-related modules
    └── Utils/      # Utility functions</code></pre>
<p>Directories under <code>src/</code> can be customized based on the project’s needs. Each directory can contain
multiple <code>.lean</code> files, each defining a module. The <code>Main.lean</code> file serves as the entry point for
the project.</p>
<h2 id="lake-package-manager">Lake Package Manager</h2>
<p>Lake is Lean’s built-in package manager and build system for lean. It simplifies the process of building, testing,
and managing Lean projects. Lake uses <code>lakefile.toml</code> for configuration:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode toml"><code class="sourceCode toml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;my_project&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">&quot;0.1.0&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dt">defaultTargets</span> <span class="op">=</span> <span class="op">[</span><span class="st">&quot;my_project&quot;</span><span class="op">]</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">[[lean_lib]]</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;MyProject&quot;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="kw">[[lean_exe]]</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;MyProject&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="dt">root</span> <span class="op">=</span> <span class="st">&quot;Main&quot;</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="kw">[[dependencies]]</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;mathlib&quot;</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">&quot;3.0.0&quot;</span></span></code></pre></div>
<p>Here are some key points about the configuration:</p>
<ul>
<li><code>name</code>: The name of the project.</li>
<li><code>version</code>: The version of the project.</li>
<li><code>defaultTargets</code>: The default targets to build when running <code>lake build</code>.</li>
<li><code>[[lean_lib]]</code>: Defines a Lean library target.</li>
<li><code>[[lean_exe]]</code>: Defines a Lean executable target.</li>
<li><code>root</code>: The entry point for the executable.</li>
<li><code>[[dependencies]]</code>: Specifies dependencies for the project, such as mathlib.</li>
</ul>
<p>There are several more options available for configuring the project in the <code>lakefile.toml</code> and can be
found in the <a href="https://github.com/leanprover/lean4/blob/master/src/lake/README.md">Lake documentation</a>.</p>
<p>Common Lake commands:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lake</span> build       <span class="co"># Build the project</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lake</span> exe         <span class="co"># Build and run executables</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">lake</span> clean       <span class="co"># Clean build artifacts</span></span></code></pre></div>
<h2 id="vscode-vscodium-integration">vscode / vscodium Integration</h2>
<p>VSCode is the primary IDE for Lean development. The Lean extension provides several features like any modern
development environment such as syntax highlighting, real-time type information, interactive theorem proving, go to
definition, auto-completion, and an infoview that shows real-time type information, proof state, error messages, and
documentation.</p>
<p>Other editor integrations are available such as <code>lean-mode</code> for Emacs and <code>lean.vim</code> for Vim.
However, the VSCode extension is the most feature-rich and actively maintained.</p>
<h2 id="elan">elan</h2>
<p><code>elan</code> is a tool for managing Lean installations. It allows you to install and manage multiple versions of
Lean on your system. You can install elan using the following command:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh <span class="at">-sSf</span> <span class="kw">|</span> <span class="fu">sh</span></span></code></pre></div>
<p>Once installed, you can use elan to install the latest stable version of Lean:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">elan</span> default stable</span></code></pre></div>
<p>You can also use elan to switch between different versions of Lean and manage your Lean environment.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">elan</span> install <span class="op">&lt;</span>version<span class="op">&gt;</span>  <span class="co"># Install a specific version of Lean</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">elan</span> default <span class="op">&lt;</span>version<span class="op">&gt;</span>  <span class="co"># Set the default version of Lean</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="ex">elan</span> list               <span class="co"># List installed Lean versions</span></span></code></pre></div>
<h2 id="doc-gen4">doc-gen4</h2>
<p>Lean supports documentation strings using <code>/-! ... -/</code> for modules and <code>/-- ... -/</code> for
definitions:</p>
<pre class="lean"><code>/-!
# Basic Arithmetic Module
This module provides basic arithmetic operations.
-/

/--
`add` performs addition on natural numbers.
# Examples
```lean
#eval add 2 3  -- returns 5</code></pre>
<p>-/ def add (x y : Nat) : Nat := x + y</p>
<pre><code>
Lean also supports markdown-style comments for documentation:

```lean
/- Markdown-style comment
# Heading
This is a paragraph.
-/</code></pre>
<p>Documentation strings can be accessed using the <code>#print</code> command:</p>
<pre class="lean"><code>#print add</code></pre>
<p><a href="https://github.com/leanprover/doc-gen4"><code>doc-gen4</code></a> is a tool that generates documentation for
Lean projects and comes bundled with the Lean installation. Its setup includes creating a nested project for
documentation building inside the lake project.</p>
<ol type="1">
<li>Create a directory called <code>docbuild</code> inside the project.</li>
<li>Create a <code>lakefile.toml</code> file inside the <code>docbuild</code> directory:</li>
</ol>
<div class="sourceCode" id="cb14"><pre class="sourceCode toml"><code class="sourceCode toml"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;docbuild&quot;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dt">reservoir</span> <span class="op">=</span> <span class="cn">false</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">version</span> <span class="op">=</span> <span class="st">&quot;0.1.0&quot;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dt">packagesDir</span> <span class="op">=</span> <span class="st">&quot;../.lake/packages&quot;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="kw">[[require]]</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;MyProject&quot;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="dt">path</span> <span class="op">=</span> <span class="st">&quot;../&quot;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="kw">[[require]]</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="dt">scope</span> <span class="op">=</span> <span class="st">&quot;leanprover&quot;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="dt">name</span> <span class="op">=</span> <span class="st">&quot;doc-gen4&quot;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Use revision v4.x if you are developing against a stable Lean version.</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="dt">rev</span> <span class="op">=</span> <span class="st">&quot;main&quot;</span></span></code></pre></div>
<ol start="3" type="1">
<li>Run <code>lake update doc-gen4</code> within <code>docbuild</code> to pin <code>doc-gen4</code> and its dependencies
to the chosen versions.</li>
<li>If the parent project has dependencies, they can be updated for building the documentation by running
<code>lake update MyProject</code> in the <code>docbuild</code> directory.</li>
</ol>
<h2 id="testing">Testing</h2>
<p>Lean supports unit testing through its <code>test</code> command:</p>
<pre class="lean"><code>def double (x : Nat) : Nat := x * 2

#test double 2 = 4        -- Basic test
#test double 0 = 0        -- Edge case</code></pre>
<p>Tests can be run using the <code>lean --test</code> command:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">lean</span> <span class="at">--test</span> my_file.lean</span></code></pre></div>
<hr />
<p><a href="./Lean.debugging.html">Debugging</a></p>
</body>
</html>
