<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../css/agda.css" type="text/css" />
</head>
<body>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<hr />
<ul>
<li><a href="#debugging-agda">Debugging Agda</a></li>
<li><a href="#holes">Holes</a></li>
<li><a href="#features">Features</a>
<ul>
<li><a href="#global-commands">Global commands</a></li>
<li><a href="#goal-specific-commands">Goal-specific commands</a></li>
<li><a href="#commands-working-in-the-context-of-a-specific-goal">Commands working in the context of a specific goal</a></li>
</ul></li>
<li><a href="#text-editor-support">Text editor support</a></li>
<li><a href="#useful-agda-mode-commands">Useful Agda-mode commands</a></li>
<li><a href="#refl">refl</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="debugging-agda">Debugging Agda</h1>
<div class="sourceCode"><pre class="sourceCode agda"><code class="sourceCode agda"><span class="pp">{-# OPTIONS --allow-unsolved-metas #-}</span>

<span class="kw">module</span> Lang<span class="ot">.</span>debugging <span class="kw">where</span>

<span class="kw">open</span> <span class="kw">import</span> Agda<span class="ot">.</span>Builtin<span class="ot">.</span>Nat</code></pre></div>
<p>Debugging and tooling are arguably the most vital parts of the development process and a language ecosystem. Tools tend to help developers figure out issues and assit them in the entire development process. Agda has a small set of indisposable tools. We look at how to use some of them to make our lives easier.</p>
<h2 id="holes">Holes</h2>
<p>The agda compiler supports type checking and providing hints while writing code. Unknown types can be represented with a placeholder <code>?</code> and the compiler can help deduce the type.</p>
<div class="sourceCode"><pre class="sourceCode agda"><code class="sourceCode agda"><span class="kw">data</span> <span class="ot">_</span>even <span class="ot">:</span> Nat <span class="ot">→</span> <span class="dt">Set</span> <span class="kw">where</span>
  ZERO <span class="ot">:</span> zero even
  STEP <span class="ot">:</span> <span class="ot">∀</span> x <span class="ot">→</span> x even <span class="ot">→</span> suc <span class="ot">(</span>suc x<span class="ot">)</span> even

proof₁ <span class="ot">:</span> suc <span class="ot">(</span>suc <span class="ot">(</span>suc <span class="ot">(</span>suc zero<span class="ot">)))</span> even
proof₁ <span class="ot">=</span> ?</code></pre></div>
<p>The agda compiler hints the <code>?</code> should be <code>4 even</code>. This placeholder is called a <strong>hole</strong>.</p>
<h2 id="features">Features</h2>
<h3 id="global-commands">Global commands</h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Internal name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>load</td>
<td>Load a file and type check it.</td>
<td><code>Cmd_Load</code></td>
</tr>
<tr class="even">
<td>compile</td>
<td>compile a file using the various agda backends (<code>GHC</code>, <code>GHCNoMain</code>, <code>LaTeX</code>, <code>QuickLaTeX</code> etc)</td>
<td><code>Cmd_compile</code></td>
</tr>
<tr class="odd">
<td>abort</td>
<td>abort the current operation, do nothing otherwise</td>
<td><code>Cmd_abort</code></td>
</tr>
<tr class="even">
<td>toggle-display-of-implicit-arguments</td>
<td></td>
<td><code>ToggleImplicitArgs</code></td>
</tr>
<tr class="odd">
<td>show-constraints</td>
<td>Show constraints or goals</td>
<td><code>Cmd_constraints</code></td>
</tr>
<tr class="even">
<td>solve-constraints</td>
<td>Solve all constraints in a file</td>
<td><code>Cmd_solveAll</code></td>
</tr>
<tr class="odd">
<td>show-goals</td>
<td>Show all goals in a file</td>
<td><code>Cmd_metas</code></td>
</tr>
<tr class="even">
<td>search-about</td>
<td>Search about a keyword</td>
<td><code>Cmd_search_about_toplevel</code></td>
</tr>
</tbody>
</table>
<h3 id="goal-specific-commands">Goal-specific commands</h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Internal name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>why-in-scope</td>
<td>Explain why a keyword is in scope</td>
<td><code>Cmd_why_in_scope</code></td>
</tr>
<tr class="even">
<td>infer-type</td>
<td>Infer type</td>
<td><code>Cmd_infer</code></td>
</tr>
<tr class="odd">
<td>module-contents</td>
<td>List all module contents</td>
<td><code>Cmd_show_module_contents</code></td>
</tr>
<tr class="even">
<td>compute-normal-form</td>
<td>Compute the normal form of either selected code or given expression</td>
<td><code>Cmd_compute</code></td>
</tr>
</tbody>
</table>
<h3 id="commands-working-in-the-context-of-a-specific-goal">Commands working in the context of a specific goal</h3>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Description</th>
<th>Internal name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>give</td>
<td>Fill a goal</td>
<td><code>Cmd_give</code></td>
</tr>
<tr class="even">
<td>refine</td>
<td>Refine. Partial give: makes new holes for missing arguments</td>
<td><code>Cmd_refine_or_intro</code></td>
</tr>
<tr class="odd">
<td>auto</td>
<td>Automatic proof search, find proofs</td>
<td><code>Cmd_auto</code></td>
</tr>
<tr class="even">
<td>case</td>
<td>pattern match on variables (case split)</td>
<td><code>Cmd_make_case</code></td>
</tr>
<tr class="odd">
<td>goal-type</td>
<td>Goal type</td>
<td><code>Cmd_goal_type</code></td>
</tr>
<tr class="even">
<td>context</td>
<td>Context of the goal</td>
<td><code>Cmd_context</code></td>
</tr>
<tr class="odd">
<td>goal-type-and-context</td>
<td>Type and context of the goal</td>
<td><code>Cmd_goal_type_context</code></td>
</tr>
<tr class="even">
<td>goal-type-and-inferred-type</td>
<td>Infer goal type and the context of the goal</td>
<td><code>Cmd_goal_type_context_infer</code></td>
</tr>
</tbody>
</table>
<h2 id="text-editor-support">Text editor support</h2>
<p>Agda supports various <code>Interaction</code> commands to provide several features via the <code>agda --interaction</code> command. This implements a client-server protocol whereby a client can communicate with the agda compiler to do various tasks on the source files. This can be tied to text editors and IDEs to provide additional assistance for programmers. Such integrations exist for the following text editors:</p>
<ul>
<li>Emacs - developed first, has tighest integration <a href="https://agda.readthedocs.io/en/v2.5.2/tools/emacs-mode.html">Emacs mode</a></li>
<li>Atom - <a href="https://atom.io/packages/agda-mode">agda-mode</a></li>
<li>VSCode - <a href="https://github.com/freebroccolo/vscode-agda">vscode-agda</a></li>
<li>vim - <a href="https://github.com/derekelkins/agda-vim">agda-vim</a></li>
</ul>
<p>There is discontinued support for <a href="https://github.com/banacorn/agda-mode-st3">sublime</a>, <a href="https://pdfs.semanticscholar.org/b7f9/32609298debd21398d54e13c864e26a03ac1.pdf">eclipse</a>.</p>
<h2 id="useful-agda-mode-commands">Useful Agda-mode commands</h2>
<div class="sourceCode"><pre class="sourceCode markdown"><code class="sourceCode markdown">C-c C-l   load (type checking)
C-c C-f   forward (jump to next hole)
C-c C-b   backward (jump to previous hole)
C-c C-d   deduce (type of expression)
C-c C-n   normalize (evaluate expression)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode markdown"><code class="sourceCode markdown">Commands inside a hole
C-c C-,   information about the hole
C-c C-d   deduce (type of contents of hole)
C-c C-Space   give (checks whether the term in the hole has the right type and if it has, replaces the hole with the term)
C-c C-c   case split (pattern match on variables)
C-c C-r   refine (one step further)
C-c C-a   auto (try to find a solution)</code></pre></div>
<h2 id="refl">refl</h2>
</body>
</html>
