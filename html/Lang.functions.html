<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Lang/functions</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style>
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../css/agda.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<hr />
<p><a href="contents.html">Contents</a> <a href="Lang.dataStructures.html">Previous</a> <a href="Lang.other.html">Next</a></p>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<hr />
<ul>
<li><a href="#functions">Functions</a>
<ul>
<li><a href="#pattern-matching-functions">Pattern matching functions</a>
<ul>
<li><a href="#the-logical-not">The Logical Not</a></li>
<li><a href="#the-logical-and">The logical AND</a></li>
<li><a href="#the-logical-or">The logical OR</a></li>
</ul></li>
<li><a href="#recursive-functions">Recursive functions</a>
<ul>
<li><a href="#addition-of-natural-numbers">Addition of natural numbers</a></li>
</ul></li>
</ul></li>
<li><a href="#list-functions">List functions</a>
<ul>
<li><a href="#list-concatenation">List concatenation</a></li>
<li><a href="#length">Length</a></li>
<li><a href="#map">Map</a></li>
</ul></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="functions">Functions</h1>
<p>Functions, also being technically types, can sometimes have practically simpler syntax than data while serving the same purpose.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">module</span> Lang<span class="ot">.</span>functions <span class="kw">where</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">open</span> <span class="kw">import</span> Lang<span class="ot">.</span>dataStructures <span class="kw">renaming</span> <span class="ot">(_</span>+<span class="ot">_</span> <span class="kw">to</span> <span class="ot">_</span>⨦<span class="ot">_)</span></span></code></pre></div>
<h2 id="pattern-matching-functions">Pattern matching functions</h2>
<h3 id="the-logical-not">The Logical Not</h3>
<p>The simplest of functions simply match patterns. For example the function for <code>not</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb2-1"><a href="#cb2-1"></a>not <span class="ot">:</span> Bool <span class="ot">→</span> Bool</span>
<span id="cb2-2"><a href="#cb2-2"></a>not true <span class="ot">=</span> false <span class="co">-- return false if we are given a true</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>not false <span class="ot">=</span> true <span class="co">-- return a true if we are given a false</span></span></code></pre></div>
<p>we could also use wildcard type like this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb3-1"><a href="#cb3-1"></a>not₁ <span class="ot">:</span> Bool <span class="ot">→</span> Bool</span>
<span id="cb3-2"><a href="#cb3-2"></a>not₁ true <span class="ot">=</span> false <span class="co">-- return false if we are given a true</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>not₁ <span class="ot">_</span> <span class="ot">=</span> true <span class="co">-- return true in all other cases</span></span></code></pre></div>
<h3 id="the-logical-and">The logical AND</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb4-1"><a href="#cb4-1"></a><span class="ot">_</span>∧<span class="ot">_</span> <span class="ot">:</span> Bool <span class="ot">→</span> Bool <span class="ot">→</span> Bool</span>
<span id="cb4-2"><a href="#cb4-2"></a>true ∧ whatever <span class="ot">=</span> whatever <span class="co">-- true AND whatever is whatever</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>false ∧ whatever <span class="ot">=</span> false <span class="co">-- false AND whatever is false</span></span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">infixr</span> <span class="dv">6</span> <span class="ot">_</span>∧<span class="ot">_</span></span></code></pre></div>
<h3 id="the-logical-or">The logical OR</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb5-1"><a href="#cb5-1"></a><span class="ot">_</span>∨<span class="ot">_</span> <span class="ot">:</span> Bool <span class="ot">→</span> Bool <span class="ot">→</span> Bool</span>
<span id="cb5-2"><a href="#cb5-2"></a>true ∨ whatever <span class="ot">=</span> true <span class="co">-- true or whatever is true</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>false ∨ whatever <span class="ot">=</span> whatever <span class="co">-- false or whatever is whatever</span></span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="kw">infixr</span> <span class="dv">6</span> <span class="ot">_</span>∨<span class="ot">_</span></span></code></pre></div>
<p>These functions can be applied as:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb6-1"><a href="#cb6-1"></a>notTrue <span class="ot">:</span> Bool</span>
<span id="cb6-2"><a href="#cb6-2"></a>notTrue <span class="ot">=</span> not true</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a>false₁ <span class="ot">:</span> Bool</span>
<span id="cb6-5"><a href="#cb6-5"></a>false₁ <span class="ot">=</span> true ∧ false</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a>true₁ <span class="ot">:</span> Bool</span>
<span id="cb6-8"><a href="#cb6-8"></a>true₁ <span class="ot">=</span> true ∨ false ∨ false₁</span></code></pre></div>
<h2 id="recursive-functions">Recursive functions</h2>
<h3 id="addition-of-natural-numbers">Addition of natural numbers</h3>
<p>Here we follow a similar pattern as in <code>data</code>, we define:</p>
<ul>
<li>the identity condition, what happens on addition with zero in this case</li>
<li>and how to successively build up the final value</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb7-1"><a href="#cb7-1"></a><span class="ot">_</span>+<span class="ot">_</span> <span class="ot">:</span> ℕ <span class="ot">→</span> ℕ <span class="ot">→</span> ℕ</span>
<span id="cb7-2"><a href="#cb7-2"></a>zero + n <span class="ot">=</span> n</span>
<span id="cb7-3"><a href="#cb7-3"></a>succ m + n <span class="ot">=</span> succ <span class="ot">(</span>m + n<span class="ot">)</span></span>
<span id="cb7-4"><a href="#cb7-4"></a></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="kw">infixl</span> <span class="dv">6</span> <span class="ot">_</span>+<span class="ot">_</span></span></code></pre></div>
<p>Thus, we can use them to get new numbers easily:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb8-1"><a href="#cb8-1"></a>eleven <span class="ot">=</span> ten + one</span>
<span id="cb8-2"><a href="#cb8-2"></a>twelve <span class="ot">=</span> eleven + one</span>
<span id="cb8-3"><a href="#cb8-3"></a>thirteen <span class="ot">=</span> twelve + one</span></code></pre></div>
<h1 id="list-functions">List functions</h1>
<h2 id="list-concatenation">List concatenation</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb9-1"><a href="#cb9-1"></a><span class="ot">_</span>++<span class="ot">_</span> <span class="ot">:</span> <span class="ot">{</span>A <span class="ot">:</span> <span class="dt">Set</span><span class="ot">}</span> <span class="ot">→</span> List A <span class="ot">→</span> List A <span class="ot">→</span> List A</span>
<span id="cb9-2"><a href="#cb9-2"></a>[]       ++ ys <span class="ot">=</span> ys</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="ot">(</span>x :: xs<span class="ot">)</span> ++ ys <span class="ot">=</span> x :: <span class="ot">(</span>xs ++ ys<span class="ot">)</span></span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">infixr</span> <span class="dv">5</span> <span class="ot">_</span>++<span class="ot">_</span></span></code></pre></div>
<p>This function takes a type as a parameter <code>A</code>, and hence can work on <code>List</code>s of any type <code>A</code>. This feature of functions is called “parametric polymorphism”. These functions tend to work on higher levels of abstraction, and work for all list types.</p>
<p>Note that the curly braces <code>{}</code> are called “implicit arguments” in Agda. Values of implicit arguments are derived from other arguments’ values and types by solving type equations. You don’t have to apply them or pattern match on them explicitly (though they can be explicitly stated like <code>{A = A}</code>). Practically, they help in defining the scope of types.</p>
<h2 id="length">Length</h2>
<p>The length of a list consists of traversing through the list and adding one for each element:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb10-1"><a href="#cb10-1"></a>length <span class="ot">:</span> List ⊤ <span class="ot">→</span> ℕ</span>
<span id="cb10-2"><a href="#cb10-2"></a>length [] <span class="ot">=</span> zero</span>
<span id="cb10-3"><a href="#cb10-3"></a>length <span class="ot">(</span>x :: xs<span class="ot">)</span> <span class="ot">=</span> one + <span class="ot">(</span>length xs<span class="ot">)</span></span></code></pre></div>
<h2 id="map">Map</h2>
<p>We implement the <code>map</code> function, of “map-reduce” fame, for <code>List</code>s: A map function for a <code>List</code> is a function that applies a lambda (un-named) function to all elements of a <code>List</code>.</p>
<p>If <code>f</code> were a lambda function, map-ing <code>f</code> over <code>List(a, b, c, d)</code> would produce <code>List(f(a), f(b), f(c), f(d))</code></p>
<figure>
<img src="./map.png" alt="" /><figcaption>Figure 1: Map</figcaption>
</figure>
<div class="sourceCode" id="cb11"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb11-1"><a href="#cb11-1"></a>map <span class="ot">:</span> <span class="ot">{</span>A B <span class="ot">:</span> <span class="dt">Set</span><span class="ot">}</span> <span class="ot">→</span> List A <span class="ot">→</span> <span class="ot">(</span>A <span class="ot">→</span> B<span class="ot">)</span> <span class="ot">→</span> List B</span>
<span id="cb11-2"><a href="#cb11-2"></a>map [] f <span class="ot">=</span> []</span>
<span id="cb11-3"><a href="#cb11-3"></a>map <span class="ot">(</span>x :: xs<span class="ot">)</span> f <span class="ot">=</span> <span class="ot">(</span>f x<span class="ot">)</span> :: <span class="ot">(</span>map xs f<span class="ot">)</span></span></code></pre></div>
<p>Here, we apply the function <code>addOne</code> to a list, using <code>map</code>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode agda"><code class="sourceCode agda"><span id="cb12-1"><a href="#cb12-1"></a>addOne <span class="ot">:</span> ℕ <span class="ot">→</span> ℕ</span>
<span id="cb12-2"><a href="#cb12-2"></a>addOne x  <span class="ot">=</span> x + one</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>oneAdded <span class="ot">:</span> List ℕ</span>
<span id="cb12-5"><a href="#cb12-5"></a>oneAdded <span class="ot">=</span> map <span class="ot">(</span>one :: two :: three :: four :: []<span class="ot">)</span> addOne</span></code></pre></div>
<hr />
<p><a href="./Lang.other.html">Modules, Records and Postulates</a></p>
</body>
</html>
